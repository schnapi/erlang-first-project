<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="static/css/style.css">
  <script src="https://unpkg.com/vue"></script>
</head>

<body>
  {% verbatim %}
  <div class="container-login-form">
    <header class="login-header">
      <h2 class="login-header-h2">Prijava</h2>
    </header>
    <form id="login" class="form-horizontal">
      <div>
        <label class="control-label col-sm-2" for="email">Email:</label>
        <input id="email" name="email" type="email" class="form-control" placeholder="Your email address" v-model="email">
      </div>
      <div>
        <label class="control-label col-sm-2" for="password">Geslo:</label>
        <input id="password" name="password" type="password" class="form-control" placeholder="Choose a password" v-model="password">
      </div>
      <div style="margin-top:15px;">
          <button class="btn btn-primary" type="button" v-on:click="login">Prijava</button>
      </div>
    </form>
  </div>
  {% endverbatim %}
</body>

<script>
var login = new Vue({
  el: '#login',
    data: {
      email: "mocenum",
      password: "mocenum"
    },
    methods: {
      login: function(e) {
        var userdata = JSON.stringify({
          "email": this.$data.email,
          "password": this.$data.password
        });
        self=this
        if(this.$data.email != "" && this.$data.password != "") {
          $.post("/api/login", userdata, function(data) {
            if(data.error)
              alert(data.error);
            else {
              window.location = "/";
            }
          })
        }
        else {
          alert("Email in geslo sta obvezni polji.");
        }
      }
    }
});
</script>

</html>
