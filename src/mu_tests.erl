-module(mu_tests).

-compile(export_all).

-include("../include/mu.hrl").

insert_questionnaire1() ->
  Id=1, Name = "Možnost rasti",
  mu_db:insert_update_questionnaire(Id, Name,1,15),
  QuestionMap= [#{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"2">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"2">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"2">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 1,
   <<"image">> => <<>>,
   <<"question">> => <<"�Menim, da ne morem veliko narediti za izboljaanje svojih umskih sposobnosti.�">>},
 #{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"3">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"3">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"3">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"2">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 2,
   <<"image">> => <<>>,
   <<"question">> => <<"�Verjamem, da lahko s trudom precej izboljaam svoje umske sposobnosti.�">>},
 #{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"4">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"4">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"1">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 3,
   <<"image">> => <<>>,
   <<"question">> => <<194,187,76,97,104,107,111,32,115,101,32,110,97,117,196,141,105,109,32,
     110,111,118,105,104,32,115,116,118,97,114,105,44,32,110,101,32,122,109,
     111,114,101,109,32,112,97,32,105,122,98,111,108,106,197,161,97,116,105,
     32,115,118,111,106,105,104,32,117,109,115,107,105,104,32,115,112,111,115,
     111,98,110,111,115,116,105,46,194,171>>},
 #{<<"answers">> => [#{<<"conditions">> => [#{<<"condition">> => [#{<<"answer">> => 1,<<"id">> => 1},
          #{<<"op">> => <<"and">>},
          #{<<"answer">> => 1,<<"id">> => 2},
          #{<<"op">> => <<"and">>},
          #{<<"answer">> => 1,<<"id">> => 3},
          #{<<"op">> => <<>>}],
         <<"nextQuestion">> => 5}],
      <<"defaultNextQuestion">> => <<"6">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"5">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"4">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 4,
   <<"image">> => <<>>,
   <<"question">> => <<"�Menim, da imam ne glede na svojo trenutno stopnjo umskih sposobnosti zmo~nost, da jo precej izboljaam.�">>},
 #{<<"answers">> => [],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 5,
   <<"image">> => <<>>,
   <<"question">> => <<194,187,79,100,103,111,118,111,114,105,32,107,97,197,190,101,106,111,44,
     32,100,97,32,115,105,32,114,97,115,116,111,196,141,101,32,109,105,115,
     101,108,110,111,32,110,97,114,97,118,110,97,110,46,32,84,111,32,112,111,
     109,101,110,105,44,32,100,97,32,109,101,110,105,197,161,44,32,100,97,32,
     115,111,32,116,118,111,106,101,32,117,109,115,107,101,32,115,112,111,115,
     111,98,110,111,115,116,105,32,109,111,197,190,110,101,32,105,122,98,111,
     108,106,197,161,97,110,106,97,46,32,83,32,116,97,107,197,161,110,105,109,
     32,109,105,197,161,108,106,101,110,106,101,109,32,116,101,32,111,118,105,
     114,101,32,110,101,32,117,115,116,97,118,105,106,111,44,32,115,97,106,32,
     122,97,32,110,106,105,104,111,118,111,32,112,114,101,109,97,103,111,118,
     97,110,106,101,32,118,108,111,197,190,105,197,161,32,100,111,100,97,116,
     101,110,32,116,114,117,100,46,194,171>>},
 #{<<"answers">> => [],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 6,
   <<"image">> => <<>>,
   <<"question">> => <<"Super, spoznal si dve miselni naravnanosti. Razmisli o njih ae v situacijah delovnega konteksta.">>},
 #{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"8">>,
      <<"id">> => 1,
      <<"value">> => <<82,97,122,109,105,197,161,108,106,97,108,32,98,105,44,32,100,97,32,98,
        111,109,32,118,32,112,114,105,104,111,100,110,106,101,32,118,32,115,
        118,111,106,101,32,100,101,108,111,32,118,108,111,197,190,105,108,32,
        118,101,196,141,32,116,114,117,100,97,46,32,80,114,97,118,32,116,97,
        107,111,32,98,105,32,110,97,196,141,114,116,111,118,97,108,44,32,100,
        97,32,115,101,32,98,111,109,32,117,100,101,108,101,197,190,105,108,32,
        100,111,100,97,116,110,105,104,32,117,115,112,111,115,97,98,108,106,97,
        110,106,32,105,110,32,116,97,107,111,32,105,122,98,111,108,106,197,161,
        97,108,32,115,118,111,106,111,32,100,101,108,111,118,110,111,32,117,
        196,141,105,110,107,111,118,105,116,111,115,116,46>>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"8">>,
      <<"id">> => 2,
      <<"value">> => <<82,97,122,109,105,197,161,108,106,97,108,32,98,105,32,111,32,116,101,
        109,44,32,100,97,32,110,105,115,101,109,32,100,111,118,111,108,106,32,
        115,112,111,115,111,98,101,110,32,122,97,32,111,112,114,97,118,108,106,
        97,110,106,101,32,116,101,103,97,32,100,101,108,111,118,110,101,103,97,
        32,109,101,115,116,97,46,32,83,107,114,98,101,108,111,32,98,105,32,109,
        101,44,32,196,141,101,32,115,101,109,32,115,112,108,111,104,32,110,97,
        32,112,114,97,118,101,109,32,100,101,108,111,118,110,101,109,32,109,
        101,115,116,117,46>>,
      <<"weight">> => <<"2">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 7,
   <<"image">> => <<>>,
   <<"question">> => <<79,115,101,98,97,32,110,97,32,115,108,105,107,105,32,106,101,32,112,114,
     97,118,107,97,114,32,112,114,101,106,101,108,97,32,101,45,112,111,197,
     161,116,110,111,32,115,112,111,114,111,196,141,105,108,111,44,32,100,97,
     32,106,101,32,111,99,101,110,97,32,110,106,101,110,101,32,100,101,108,
     111,118,110,101,32,117,115,112,101,197,161,110,111,115,116,105,32,110,
     105,197,190,106,97,32,111,100,32,112,111,118,112,114,101,196,141,106,97,
     46,32,75,97,107,111,32,98,105,32,116,105,32,114,97,122,109,105,197,161,
     108,106,97,108,44,32,196,141,101,32,98,105,32,98,105,108,32,116,97,32,
     111,115,101,98,97,63>>},
 #{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"9">>,
      <<"id">> => 1,
      <<"value">> => <<"Razmialjal bi, da ne znam delati v skupini in da nimam dovolj dobrih socialnih spretnosti, katerih ne morem izboljaati in zato nikoli ne bom izbran.">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"9">>,
      <<"id">> => 2,
      <<"value">> => <<"Razmialjal bi, da se nisem dovolj uril za delo v skupini. Pristopil bi do sodelavcev in nadrejenih ter se pozanimal, kako izboljaati kompetence dela v skupinah.">>,
      <<"weight">> => <<"2">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 8,
   <<"image">> => <<>>,
   <<"question">> => <<79,115,101,98,97,32,110,97,32,115,108,105,107,105,32,110,105,32,98,105,
     108,97,32,105,122,98,114,97,110,97,32,122,97,32,115,107,117,112,105,110,
     115,107,105,32,112,114,111,106,101,107,116,46,32,75,97,107,111,32,98,105,
     32,116,105,32,114,97,122,109,105,197,161,108,106,97,108,44,32,196,141,
     101,32,98,105,32,98,105,108,32,116,97,32,111,115,101,98,97,63>>},
 #{<<"answers">> => [],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 9,
   <<"image">> => <<>>,
   <<"question">> => <<79,115,101,98,97,32,110,97,32,115,108,105,107,105,32,110,105,32,98,105,
     108,97,32,105,122,98,114,97,110,97,32,122,97,32,115,107,117,112,105,110,
     115,107,105,32,112,114,111,106,101,107,116,46,32,75,97,107,111,32,98,
     105,32,116,105,32,114,97,122,109,105,197,161,108,106,97,108,44,32,196,
     141,101,32,98,105,32,98,105,108,32,116,97,32,111,115,101,98,97,63>>}],
  [mu_db:insert_update_question_answers(Id,X) || X <- QuestionMap ],
  ok.

insert_questionnaire2() ->
  Id=2, Name = "PREPRIČANOST VASE",
  mu_db:insert_update_questionnaire(Id, Name,1,20),
  QuestionMap= [#{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"2">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"2">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"1">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 1,
   <<"image">> => <<>>,
   <<"question">> => <<"Vprašanje 1">>},
 #{<<"answers">> => [#{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"3">>,
      <<"id">> => 1,
      <<"value">> => <<"Da">>,
      <<"weight">> => <<"1">>},
    #{<<"conditions">> => [],
      <<"defaultNextQuestion">> => <<"3">>,
      <<"id">> => 2,
      <<"value">> => <<"Ne">>,
      <<"weight">> => <<"-1">>}],
   <<"answers_type">> => <<"selectOne">>,
   <<"id">> => 2,
   <<"image">> => <<>>,
   <<"question">> => <<"Vprašanje 2">>}],
  [mu_db:insert_update_question_answers(Id,X) || X <- QuestionMap ],
  ok.

check_password() ->
  mu_db:insert_user(<<"check_password@gmail.com">>, <<"admin">>, <<"test">>, {"127.0.0.1"}),
  Email = <<"check_password@gmail.com">>,
  Password = <<"test">>,
  case mu_db:check_user_password(Email,Password) of
    ok -> lager:debug("Test check_user_password passed!"),
      case mu_db:delete_user(Email) of
        {ok,_} -> lager:debug("User is succesfuly removed: ~p",[Email]);
        {error,Error} -> lager:error("Test delete_user failed: ~p",[Error])
      end;
    _ -> lager:error("Test check_user_password failed: ~p")
  end.
